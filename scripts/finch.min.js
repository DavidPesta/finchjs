/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=Array.prototype.slice;z=function(a){return typeof a==typeof {}},x=function(a){return Object.prototype.toString.call(a)==="[object Function]"},w=function(a){return Object.prototype.toString.call(a)==="[object Array]"},A=function(a){return Object.prototype.toString.call(a)==="[object String]"},y=function(a){return Object.prototype.toString.call(a)==="[object Number]"},K=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},L=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},G=function(a,b){return a.indexOf(b)===0},o=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},n=function(a,b){return a.indexOf(b)!==-1},D=function(a){return a[a.length-1]},p=function(a,b){var c,d;z(a)||(a={}),z(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},B=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},m=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},i=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),k=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.setup,d=e.teardown,b=e.context,this.setup=x(c)?c:function(){},this.teardown=x(d)?d:function(){},this.context=z(b)?b:{}}return a}(),j=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.node,b=e.boundValues,d=e.parameterObservables,this.node=c!=null?c:null,this.boundValues=b!=null?b:[],this.parameterObservables=d!=null?d:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&m(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e,f;return this.node==null?null:(b=(e=(f=this.node.parent)!=null?f.bindings.length:void 0)!=null?e:0,c=this.boundValues.slice(0,b),d=this.parameterObservables.slice(0,-1),new a({node:this.node.parent,boundValues:c,parameterObservables:d}))},a.prototype.getChild=function(a){var b;while(a!=null&&!this.isEqual(b=a.getParent()))a=b;return a.parameterObservables=this.parameterObservables.slice(0),a.parameterObservables.push([]),a},a}(),g=function(){function b(b){var c=this;this.callback=b,x(this.callback)||(this.callback=function(){}),this.dependencies=[],this.parameterAccessor=function(b){return n(c.dependencies,b)||c.dependencies.push(b),a[b]}}return b.prototype.resetDependencies=function(){return this.dependencies=[]},b.prototype.trigger=function(){return this.resetDependencies(),this.callback(this.parameterAccessor)},b}(),f=new j({node:null}),e={Literal:"Literal",Variable:"Variable"},C=function(a){var b,c,d,e,f,g,h,i;a=A(a)?K(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},v=function(a){var b;return G(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},s=function(a){var b;return G(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},F=function(a){return a===""?[]:(a=L(a),a.split("/"))},u=function(a){return G(a,":")?e.Variable:e.Literal},t=function(a){switch(u(a)){case e.Literal:return a;case e.Variable:return a.slice(1)}},l=function(a,b,c){var d,f,g,h,j;return h=F(v(b)),f=F(s(b)),g=a,d=[],(j=function(b,l){var m,n,o,p,q,r,s,v;m=null,q=!1,p=null;if(h.length<=0&&f.length<=0)return b.parent=g,b.bindings=d,b.routeSettings=new k(c);h.length>0?(m=h.shift(),h.length===0&&(q=!0)):m=f.shift(),o=u(m),n=t(m),l=""+l+"/"+m;switch(o){case e.Literal:p=(s=(r=b.childLiterals)[n])!=null?s:r[n]=new i({name:l,nodeType:o,parent:a});break;case e.Variable:p=(v=b.childVariable)!=null?v:b.childVariable=new i({name:l,nodeType:o}),d.push(n)}return q&&(g=p),j(p,l)})(a,"")},r=function(a,b){var c,d,e;return e=F(b),c=[],(d=function(a){var b,f;if(e.length<=0)return new j({node:a,boundValues:c});b=e.shift();if(a.childLiterals[b]!=null){f=d(a.childLiterals[b]);if(f!=null)return f}if(a.childVariable!=null){c.push(b),f=d(a.childVariable);if(f!=null)return f;c.pop()}return null})(a)},q=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},h=b=a=c=null,(E=function(){return h=new i({name:"*"}),b=f,a={},c=null})(),H=function(){var a,d,e,f,g,h,i,j;if(c.isEqual(b)){j=b.parameterObservables;for(f=0,h=j.length;f<h;f++){e=j[f];for(g=0,i=e.length;g<i;g++)d=e[g],d.trigger()}return c=null}return a=q(b,c),b.isEqual(a)?I():J()},I=function(){var a,d,e,f,g,h;return b=b.getChild(c),h=(g=b.node.routeSettings)!=null?g:{},d=h.context,f=h.setup,d==null&&(d={}),f==null&&(f=function(){}),a=b.getBindings(),e=function(){return H()},f.length===2?f.call(d,a,e):(f.call(d,a),e())},J=function(){var a,c,d,e,f,g;return g=(f=b.node.routeSettings)!=null?f:{},c=g.context,e=g.teardown,c==null&&(c={}),e==null&&(e=function(){}),a=b.getBindings(),d=function(){return b=b.getParent(),H()},e.length===2?e.call(c,a,d):(e.call(c,a),d())},d={debug:!0,route:function(a,b){return x(b)&&(b={setup:b}),z(b)||(b={}),A(a)||(a=""),l(h,a,b)},call:function(b){var d,e,f,g,i,j;return A(b)||(b="/"),b===""&&(b="/"),j=b.split("?",2),b=j[0],i=j[1],e=r(h,b),e==null?!1:(g=C(i),d=e.getBindings(),a=p(g,d),f=c,c=e,f==null&&H(),!0)},observe:function(){var a,c,e,f;return a=1<=arguments.length?M.call(arguments,0):[],a.length===2?(e=a[0],c=a[1],w(e)||(e=[]),x(c)||(c=function(){}),d.observe(function(a){var b,d;return d=function(){var c,d,f;f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(a(b));return f}(),c.apply(null,d)})):(c=a[0],x(c)||(c=function(){}),f=new g(c),D(b.parameterObservables).push(f))},reset:function(){c=f,H(),E()}},d.debug&&(d.private={isObject:z,isFunction:x,isArray:w,isString:A,isNumber:y,trim:K,trimSlashes:L,startsWith:G,endsWith:o,contains:n,extend:p,objectsEqual:B,arraysEqual:m,NullPath:f,NodeType:e,RouteSettings:k,RoutePath:j,RouteNode:i,parseQueryString:C,getParentRouteString:v,getChildRouteString:s,splitRouteString:F,getComponentType:u,getComponentName:t,addRoute:l,findPath:r,findNearestCommonAncestor:q,globals:function(){return{RootNode:h,CurrentPath:b,CurrentParameters:a}}}),this.Finch=d})).call(this)