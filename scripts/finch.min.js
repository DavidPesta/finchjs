/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=Array.prototype.slice;D=function(a){return typeof a==typeof {}},B=function(a){return Object.prototype.toString.call(a)==="[object Function]"},A=function(a){return Object.prototype.toString.call(a)==="[object Array]"},E=function(a){return Object.prototype.toString.call(a)==="[object String]"},C=function(a){return Object.prototype.toString.call(a)==="[object Number]"},O=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},P=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},K=function(a,b){return a.indexOf(b)===0},p=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},n=function(a,b){return a.indexOf(b)!==-1},H=function(a){return a[a.length-1]},q=function(a,b){var c,d;D(a)||(a={}),D(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},F=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},m=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},i=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),k=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.setup,d=e.teardown,b=e.context,this.setup=B(c)?c:function(){},this.teardown=B(d)?d:function(){},this.context=D(b)?b:{}}return a}(),j=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.node,b=e.boundValues,d=e.parameterObservables,this.node=c!=null?c:null,this.boundValues=b!=null?b:[],this.parameterObservables=d!=null?d:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&m(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e,f;return this.node==null?null:(b=(e=(f=this.node.parent)!=null?f.bindings.length:void 0)!=null?e:0,c=this.boundValues.slice(0,b),d=this.parameterObservables.slice(0,-1),new a({node:this.node.parent,boundValues:c,parameterObservables:d}))},a.prototype.getChild=function(a){var b;while(a!=null&&!this.isEqual(b=a.getParent()))a=b;return a.parameterObservables=this.parameterObservables.slice(0),a.parameterObservables.push([]),a},a}(),g=function(){function b(b){var c=this;this.callback=b,B(this.callback)||(this.callback=function(){}),this.dependencies=[],this.parameterAccessor=function(b){return n(c.dependencies,b)||c.dependencies.push(b),a[b]}}return b.prototype.resetDependencies=function(){return this.dependencies=[]},b.prototype.trigger=function(){return this.resetDependencies(),this.callback(this.parameterAccessor)},b}(),f=new j({node:null}),e={Literal:"Literal",Variable:"Variable"},y=o=null,z=!1,G=function(a){var b,c,d,e,f,g,h,i;a=E(a)?O(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},w=function(a){var b;return K(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},t=function(a){var b;return K(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},J=function(a){return a===""?[]:(a=P(a),a.split("/"))},v=function(a){return K(a,":")?e.Variable:e.Literal},u=function(a){switch(v(a)){case e.Literal:return a;case e.Variable:return a.slice(1)}},l=function(a,b,c){var d,f,g,h,j;return h=J(w(b)),f=J(t(b)),g=a,d=[],(j=function(b,l){var m,n,o,p,q,r,s,t;m=null,q=!1,p=null;if(h.length<=0&&f.length<=0)return b.parent=g,b.bindings=d,b.routeSettings=new k(c);h.length>0?(m=h.shift(),h.length===0&&(q=!0)):m=f.shift(),o=v(m),n=u(m),l=""+l+"/"+m;switch(o){case e.Literal:p=(s=(r=b.childLiterals)[n])!=null?s:r[n]=new i({name:l,nodeType:o,parent:a});break;case e.Variable:p=(t=b.childVariable)!=null?t:b.childVariable=new i({name:l,nodeType:o}),d.push(n)}return q&&(g=p),j(p,l)})(a,"")},s=function(a,b){var c,d,e;return e=J(b),c=[],(d=function(a){var b,f;if(e.length<=0)return new j({node:a,boundValues:c});b=e.shift();if(a.childLiterals[b]!=null){f=d(a.childLiterals[b]);if(f!=null)return f}if(a.childVariable!=null){c.push(b),f=d(a.childVariable);if(f!=null)return f;c.pop()}return null})(a)},r=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},h=b=a=c=null,(I=function(){return h=new i({name:"*"}),b=f,a={},c=null})(),L=function(){var a,d,e,f,g,h,i,j;if(c.isEqual(b)){j=b.parameterObservables;for(f=0,h=j.length;f<h;f++){e=j[f];for(g=0,i=e.length;g<i;g++)d=e[g],d.trigger()}return c=null}return a=r(b,c),b.isEqual(a)?M():N()},M=function(){var a,d,e,f,g,h;return b=b.getChild(c),h=(g=b.node.routeSettings)!=null?g:{},d=h.context,f=h.setup,d==null&&(d={}),f==null&&(f=function(){}),a=b.getBindings(),e=function(){return L()},f.length===2?f.call(d,a,e):(f.call(d,a),e())},N=function(){var a,c,d,e,f,g;return g=(f=b.node.routeSettings)!=null?f:{},c=g.context,e=g.teardown,c==null&&(c={}),e==null&&(e=function(){}),a=b.getBindings(),d=function(){return b=b.getParent(),L()},e.length===2?e.call(c,a,d):(e.call(c,a),d())},x=function(a){var b,c,e;b="","hash"in window.location?(b=window.location.hash,K(b,"#")&&(b=b.slice(1))):(c=window.location.href,e=c.split("#",2),b=e.length===2?e[1]:"");if(b!==o)return d.call(b),o=b},d={debug:!0,route:function(a,b){return B(b)&&(b={setup:b}),D(b)||(b={}),E(a)||(a=""),l(h,a,b)},call:function(b){var d,e,f,g,i,j;return E(b)||(b="/"),b===""&&(b="/"),j=b.split("?",2),b=j[0],i=j[1],e=s(h,b),e==null?!1:(g=G(i),d=e.getBindings(),a=q(g,d),f=c,c=e,f==null&&L(),!0)},observe:function(){var a,c,e,f;return a=1<=arguments.length?Q.call(arguments,0):[],a.length===2?(e=a[0],c=a[1],A(e)||(e=[]),B(c)||(c=function(){}),d.observe(function(a){var b,d;return d=function(){var c,d,f;f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(a(b));return f}(),c.apply(null,d)})):(c=a[0],B(c)||(c=function(){}),f=new g(c),H(b.parameterObservables).push(f))},listen:function(){return z||("onhashchange"in window?B(window.addEventListener)?(window.addEventListener("hashchange",x,!0),z=!0):B(window.attachEvent)&&(window.attachEvent("hashchange",x),z=!0):(y=setInterval(x,33),z=!0),x()),z},ignore:function(){return z&&(y!==null?(clearInterval(y),y=null,z=!1):"onhashchange"in window&&(B(window.removeEventListener)?(window.removeEventListener("hashchange",x,!0),z=!1):B(window.detachEvent)&&(window.detachEvent("hashchange",x),z=!1))),!z},reset:function(){c=f,L(),I()}},d.debug&&(d.private={isObject:D,isFunction:B,isArray:A,isString:E,isNumber:C,trim:O,trimSlashes:P,startsWith:K,endsWith:p,contains:n,extend:q,objectsEqual:F,arraysEqual:m,NullPath:f,NodeType:e,RouteSettings:k,RoutePath:j,RouteNode:i,parseQueryString:G,getParentRouteString:w,getChildRouteString:t,splitRouteString:J,getComponentType:v,getComponentName:u,addRoute:l,findPath:s,findNearestCommonAncestor:r,globals:function(){return{RootNode:h,CurrentPath:b,CurrentParameters:a}}}),this.Finch=d})).call(this)