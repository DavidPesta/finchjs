/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;w=function(a){return typeof a==typeof {}},u=function(a){return Object.prototype.toString.call(a)==="[object Function]"},t=function(a){return Object.prototype.toString.call(a)==="[object Array]"},x=function(a){return Object.prototype.toString.call(a)==="[object String]"},v=function(a){return Object.prototype.toString.call(a)==="[object Number]"},G=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},H=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},E=function(a,b){return a.indexOf(b)===0},l=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},i=function(a,b){return a.indexOf(b)!==-1},m=function(a,b){var c,d;w(a)||(a={}),w(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},z=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},h=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},b={Literal:"Literal",Variable:"Variable"},f=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),e=function(){function a(a){var b,c,d,e,f;f=a!=null?a:{},d=f.setup,c=f.load,e=f.teardown,b=f.context,this.setup=u(d)?d:function(){},this.load=u(c)?c:function(){},this.teardown=u(e)?e:function(){},this.context=w(b)?b:{}}return a}(),d=function(){function a(a){var b,c,d;d=a!=null?a:{},c=d.node,b=d.boundValues,this.node=c!=null?c:null,this.boundValues=b!=null?b:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&h(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e;return this.node==null?null:(b=(d=(e=this.node.parent)!=null?e.bindings.length:void 0)!=null?d:0,c=this.boundValues.slice(0,b),new a({node:this.node.parent,boundValues:c}))},a.prototype.getChild=function(c){var d,e;e=c!=null?c.node:void 0;while(e!=null&&e.parent!==this.node)e=e.parent;return e==null?null:h(this.boundValues,e.boundValues.slice(0,this.boundValues.length+1||9e9))?(d=this.boundValues.slice(0),e.nodeType===b.Variable&&boundValues.push(e.boundValues[this.boundValues.length]),new a({node:e,boundValues:boundValues})):null},a}(),c=new d({node:null}),B=new f({name:"*"}),k=c,j={},A=function(a){var b,c,d,e,f,g,h,i;a=x(a)?G(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},s=function(a){var b;return E(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},p=function(a){var b;return E(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},D=function(a){return a===""?[]:(a=H(a),a.split("/"))},r=function(a){return E(a,":")?b.Variable:b.Literal},q=function(a){switch(r(a)){case b.Literal:return a;case b.Variable:return a.slice(1)}},g=function(a,c,d){var g,h,i,j,k;return j=D(s(c)),h=D(p(c)),i=a,g=[],(k=function(c,l){var m,n,o,p,s,t,u,v;m=null,s=!1,p=null;if(j.length<=0&&h.length<=0)return c.parent=i,c.bindings=g,c.routeSettings=new e(d);j.length>0?(m=j.shift(),j.length===0&&(s=!0)):m=h.shift(),o=r(m),n=q(m),l=""+l+"/"+m;switch(o){case b.Literal:p=(u=(t=c.childLiterals)[n])!=null?u:t[n]=new f({name:l,nodeType:o,parent:a});break;case b.Variable:p=(v=c.childVariable)!=null?v:c.childVariable=new f({name:l,nodeType:o}),g.push(n)}return s&&(i=p),k(p,l)})(a,"")},o=function(a){var b,c,e;return e=D(a),b=[],(c=function(a){var f,g;if(e.length<=0)return new d({node:a,boundValues:b});f=e.shift();if(a.childLiterals[f]!=null){g=c(a.childLiterals[f]);if(g!=null)return g}if(a.childVariable!=null){b.push(f),g=c(a.childVariable);if(g!=null)return g;b.pop()}return null})(B)},n=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},C=function(a,b){var c;return(c=function(b,d){return b.isEqual(a)?d():c(b.getParent(),function(){var a,c,e,f;return b.node.routeSettings==null?d():(a=b.getBindings(),f=b.node.routeSettings,c=f.context,e=f.setup,e.length===2?e.call(c,a,function(){return d()}):(e.call(c,a),d()))})})(b,function(){var a,c,d;d=b.node.routeSettings,c=d.setup,a=d.load;if(c!==a)return y(b)})},y=function(a){var b,c,d;return d=a.node.routeSettings,b=d.context,c=d.load,c.call(b,j)},F=function(a){var b;return(b=function(c){var d,e,f,g;if(!c.isEqual(a))return c.node.routeSettings==null?b(c.getParent()):(d=c.getBindings(),g=c.node.routeSettings,e=g.context,f=g.teardown,f.length===2?f.call(e,d,function(){return b(c.getParent())}):(f.call(e,d),b(c.getParent())))})(k)},a={debug:!0,route:function(a,b){return u(b)&&(b={setup:b,load:b}),w(b)||(b={}),x(a)||(a=""),g(B,a,b)},call:function(a){var b,c,d,e,f,g;return x(a)||(a="/"),a===""&&(a="/"),g=a.split("?",2),a=g[0],f=g[1],d=o(a),d==null?!1:(e=A(f),c=d.getBindings(),j=m(e,c),d.isEqual(k)?y(k):(b=n(k,d),F(b),C(b,d)),k=d,!0)},reset:function(){F(c),B=new f({name:"*"}),k=new d({node:null}),j={}}},a.debug&&(a.private={isObject:w,isFunction:u,isArray:t,isString:x,isNumber:v,trim:G,trimSlashes:H,startsWith:E,endsWith:l,contains:i,extend:m,objectsEqual:z,arraysEqual:h,NodeType:b,RouteSettings:e,RoutePath:d,RouteTreeNode:f,parseQueryString:A,getParentRouteString:s,getChildRouteString:p,splitRouteString:D,getComponentType:r,getComponentName:q,addRoute:g,findRoutePath:o,findNearestCommonAncestor:n,setupRoute:C,loadRoute:y,teardownRoute:F,globals:function(){return{routeTreeRoot:B,currentPath:k,currentParameters:j}}}),this.Finch=a})).call(this)