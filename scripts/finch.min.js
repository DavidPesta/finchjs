/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=Array.prototype.slice;F=function(a){return typeof a==typeof {}&&a!==null},D=function(a){return Object.prototype.toString.call(a)==="[object Function]"},C=function(a){return Object.prototype.toString.call(a)==="[object Array]"},G=function(a){return Object.prototype.toString.call(a)==="[object String]"},E=function(a){return Object.prototype.toString.call(a)==="[object Number]"},S=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},T=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},O=function(a,b){return a.indexOf(b)===0},t=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},r=function(a,b){return a.indexOf(b)!==-1},L=function(a){return a[a.length-1]},H=function(a){var b,c;c=[];for(b in a)c.push(b);return c},I=function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(c);return d},u=function(a,b){var c,d;F(a)||(a={}),F(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},J=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},q=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},s=function(a,b){var c,d,e;a==null&&(a={}),b==null&&(b={}),d={};for(c in a)e=a[c],b[c]!==e&&(d[c]=b[c]);for(c in b)e=b[c],a[c]!==e&&(d[c]=e);return d},m=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),o=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.setup,d=e.teardown,b=e.context,this.setup=D(c)?c:function(){},this.teardown=D(d)?d:function(){},this.context=F(b)?b:{}}return a}(),n=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.node,b=e.boundValues,d=e.parameterObservables,this.node=c!=null?c:null,this.boundValues=b!=null?b:[],this.parameterObservables=d!=null?d:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&q(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e,f;return this.node==null?null:(b=(e=(f=this.node.parent)!=null?f.bindings.length:void 0)!=null?e:0,c=this.boundValues.slice(0,b),d=this.parameterObservables.slice(0,-1),new a({node:this.node.parent,boundValues:c,parameterObservables:d}))},a.prototype.getChild=function(a){var b;while(a!=null&&!this.isEqual(b=a.getParent()))a=b;return a.parameterObservables=this.parameterObservables.slice(0),a.parameterObservables.push([]),a},a}(),j=function(){function a(a){this.callback=a,D(this.callback)||(this.callback=function(){}),this.dependencies=[],this.initialized=!1}return a.prototype.notify=function(a){var b,c=this;b=function(){var b,d,e,f;if(!c.initialized)return!0;f=c.dependencies;for(d=0,e=f.length;d<e;d++){b=f[d];if(r(a,b))return!0}return!1}();if(b)return this.trigger()},a.prototype.trigger=function(){var a,c=this;return this.dependencies=[],a=function(a){return r(c.dependencies,a)||c.dependencies.push(a),b[a]},this.callback(a),this.initialized=!0},a}(),i=new n({node:null}),h={Literal:"Literal",Variable:"Variable"},K=function(a){var b,c,d,e,f,g,h,i;a=G(a)?S(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},A=function(a){var b;return O(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},x=function(a){var b;return O(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},N=function(a){return a===""?[]:(a=T(a),a.split("/"))},z=function(a){return O(a,":")?h.Variable:h.Literal},y=function(a){switch(z(a)){case h.Literal:return a;case h.Variable:return a.slice(1)}},p=function(a,b,c){var d,e,f,g,i;return g=N(A(b)),e=N(x(b)),f=a,d=[],(i=function(b,j){var k,l,n,p,q,r,s,t;k=null,q=!1,p=null;if(g.length<=0&&e.length<=0)return b.parent=f,b.bindings=d,b.routeSettings=new o(c);g.length>0?(k=g.shift(),g.length===0&&(q=!0)):k=e.shift(),n=z(k),l=y(k),j=""+j+"/"+k;switch(n){case h.Literal:p=(s=(r=b.childLiterals)[l])!=null?s:r[l]=new m({name:j,nodeType:n,parent:a});break;case h.Variable:p=(t=b.childVariable)!=null?t:b.childVariable=new m({name:j,nodeType:n}),d.push(l)}return q&&(f=p),i(p,j)})(a,"")},w=function(a,b){var c,d,e;return e=N(b),c=[],(d=function(a){var b,f;if(e.length<=0)return new n({node:a,boundValues:c});b=e.shift();if(a.childLiterals[b]!=null){f=d(a.childLiterals[b]);if(f!=null)return f}if(a.childVariable!=null){c.push(b),f=d(a.childVariable);if(f!=null)return f;c.pop()}return null})(a)},v=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},l=c=d=null,k=b=null,f=a=null,g=!1,(M=function(){return l=new m({name:"*"}),c=i,k={},b={},d=null})(),P=function(){var a,e,f,g,h,i,j,l,m;if(d.isEqual(c)){e=H(s(k,b)),k=b,m=c.parameterObservables;for(h=0,j=m.length;h<j;h++){g=m[h];for(i=0,l=g.length;i<l;i++)f=g[i],f.notify(e)}return d=null}return a=v(c,d),c.isEqual(a)?Q():R()},Q=function(){var a,b,e,f,g,h;return c=c.getChild(d),h=(g=c.node.routeSettings)!=null?g:{},b=h.context,f=h.setup,b==null&&(b={}),f==null&&(f=function(){}),a=c.getBindings(),e=function(){return P()},f.length===2?f.call(b,a,e):(f.call(b,a),e())},R=function(){var a,b,d,e,f,g;return g=(f=c.node.routeSettings)!=null?f:{},b=g.context,e=g.teardown,b==null&&(b={}),e==null&&(e=function(){}),a=c.getBindings(),d=function(){return c=c.getParent(),P()},e.length===2?e.call(b,a,d):(e.call(b,a),d())},B=function(b){var c;c=window.location.hash,O(c,"#")&&(c=c.slice(1)),c=unescape(c);if(c!==a)return e.call(c),a=c},e={route:function(a,b){return D(b)&&(b={setup:b}),F(b)||(b={}),G(a)||(a=""),p(l,a,b)},call:function(a){var c,e,f,g,h,i;return G(a)||(a="/"),a===""&&(a="/"),i=a.split("?",2),a=i[0],h=i[1],e=w(l,a),e==null?!1:(g=K(h),c=e.getBindings(),b=u(g,c),f=d,d=e,f==null&&P(),!0)},observe:function(){var a,b,d,f;return a=1<=arguments.length?U.call(arguments,0):[],b=a.pop(),D(b)||(b=function(){}),a.length>0?(a.length===1&&C(a[0])?d=a[0]:d=a,e.observe(function(a){var c,e;return e=function(){var b,e,f;f=[];for(b=0,e=d.length;b<e;b++)c=d[b],f.push(a(c));return f}(),b.apply(null,e)})):(f=new j(b),L(c.parameterObservables).push(f))},listen:function(){return g||("onhashchange"in window&&(D(window.addEventListener)?(window.addEventListener("hashchange",B,!0),g=!0):D(window.attachEvent)&&(window.attachEvent("hashchange",B),g=!0)),g||(f=setInterval(B,33),g=!0),B()),g},ignore:function(){return g&&(f!==null?(clearInterval(f),f=null,g=!1):"onhashchange"in window&&(D(window.removeEventListener)?(window.removeEventListener("hashchange",B,!0),g=!1):D(window.detachEvent)&&(window.detachEvent("hashchange",B),g=!1))),!g},navigate:function(a,b){var c,d,e,f,g,h,i;if(F(a)){b=a,a=null,d=(h=window.location.hash.split("?",2)[1])!=null?h:"",c=K(d);for(e in c)g=c[e],c[unescape(e)]=unescape(g);b=u(c,b)}else G(a)||(a=null),F(b)||(b={});return f=function(){var a;a=[];for(e in b)g=b[e],a.push(escape(e)+"="+escape(g));return a}().join("&"),a===null&&(a=(i=window.location.hash.split("?",2)[0])!=null?i:"",a.slice(0,1)==="#"&&(a=a.slice(1))),a=escape(a),f.length>0&&(a+=a.indexOf("?")>-1?"&":"?",a+=f),window.location.hash=a},reset:function(){d=i,P(),M()}},this.Finch=e})).call(this)