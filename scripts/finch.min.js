/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen (stoodder) and Greg Smith (smrq)

	Version 0.5.9
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
(function(){var e,o,a,n,t,l,r,i,s,d,c,u,f,h,b,_,p,w,m,v,g,F,k,z,C,N,x,H,q,y,O,L,E,j,S,T,I,P,U,B,V,D,A,W,R,$,G,K,Q,M,J,X,Y,Z,eo,oo,ao,no,to,lo,ro,io,so,co=[].slice;B=function(e){return typeof e==typeof{}&&null!==e},P=function(e){return"[object Function]"===Object.prototype.toString.call(e)},I=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},T=function(e){return"[object Array]"===Object.prototype.toString.call(e)},V=function(e){return"[object String]"===Object.prototype.toString.call(e)},U=function(e){return"[object Number]"===Object.prototype.toString.call(e)},to=function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},lo=function(e){return e.replace(/^\//,"").replace(/\/$/,"")},Y=function(e,o){return 0===e.indexOf(o)},H=function(e,o){return-1!==e.indexOf(o,e.length-o.length)},C=function(e,o){var a,n,t;if(P(e.indexOf))return-1!==e.indexOf(o);if(T(e))for(n=0,t=e.length;t>n;n++)if(a=e[n],a===o)return!0;return!1},K=function(e){return e[e.length-1]},N=function(e,o){return e.split(o).length-1},D=function(e){var o,a;a=[];for(o in e)a.push(o);return a},A=function(e){var o,a,n;n=[];for(o in e)a=e[o],n.push(a);return n},q=function(e,o){var a,n;B(e)||(e={}),B(o)||(o={});for(a in o)n=o[a],e[a]=n;return e},k=function(e){var o,a,n;B(e)||(e={}),a={};for(o in e)n=e[o],null!=n&&(a[o]=n);return a},W=function(e,o){var a,n;for(a in e)if(n=e[a],o[a]!==n)return!1;for(a in o)if(n=o[a],e[a]!==n)return!1;return!0},F=function(e,o){var a,n,t,l;if(e.length!==o.length)return!1;for(a=t=0,l=e.length;l>t;a=++t)if(n=e[a],o[a]!==n)return!1;return!0},x=function(e,o){var a,n,t;null==e&&(e={}),null==o&&(o={}),n={};for(a in e)t=e[a],o[a]!==t&&(n[a]=o[a]);for(a in o)t=o[a],e[a]!==t&&(n[a]=t);return n},z=null!=(ro=window.console)?ro:{},null==(io=z.log)&&(z.log=function(){}),null==(so=z.warn)&&(z.warn=function(){}),h=function(){function e(e){var o,a;a=e.components,o=e.childIndex,this.components=null!=a?a:[],this.childIndex=null!=o?o:0}return e}(),p=function(){function e(e){var o,a,n,t;t=null!=e?e:{},o=t.name,a=t.nodeType,n=t.parent,this.name=null!=o?o:"",this.nodeType=null!=a?a:null,this.parent=null!=n?n:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return e}(),m=function(){function e(e){var o,a,n,t,l,r;r=null!=e?e:{},n=r.setup,t=r.teardown,a=r.load,l=r.unload,o=r.context,this.setup=P(n)?n:function(){},this.load=P(a)?a:function(){},this.unload=P(l)?l:function(){},this.teardown=P(t)?t:function(){},this.context=B(o)?o:{}}return e}(),w=function(){function e(e){var o,a,n,t;t=null!=e?e:{},a=t.node,o=t.boundValues,n=t.parameterObservables,this.node=null!=a?a:null,this.boundValues=null!=o?o:[],this.parameterObservables=null!=n?n:[[]]}return e.prototype.getBindings=function(){var e,o,a,n,t,l;for(o={},l=this.node.bindings,a=n=0,t=l.length;t>n;a=++n)e=l[a],o[e]=this.boundValues[a];return R(o)},e.prototype.isEqual=function(e){return null!=e&&this.node===e.node&&F(this.boundValues,e.boundValues)},e.prototype.isRoot=function(){return null==this.node.parent},e.prototype.getParent=function(){var o,a,n,t,l;return null==this.node?null:(o=null!=(t=null!=(l=this.node.parent)?l.bindings.length:void 0)?t:0,a=this.boundValues.slice(0,o),n=this.parameterObservables.slice(0,-1),new e({node:this.node.parent,boundValues:a,parameterObservables:n}))},e.prototype.getChild=function(e){for(var o;null!=e&&!this.isEqual(o=e.getParent());)e=o;return e.parameterObservables=this.parameterObservables.slice(0),e.parameterObservables.push([]),e},e}(),f=function(){function e(e){this.callback=e,P(this.callback)||(this.callback=function(){}),this.dependencies=[],this.initialized=!1}return e.prototype.notify=function(e){var o,a=this;return o=function(){var o,n,t,l;if(!a.initialized)return!0;for(l=a.dependencies,n=0,t=l.length;t>n;n++)if(o=l[n],C(e,o))return!0;return!1}(),o?this.trigger():void 0},e.prototype.trigger=function(){var e,a=this;return this.dependencies=[],e=function(e){return C(a.dependencies,e)||a.dependencies.push(e),o[e]},this.callback(e),this.initialized=!0},e}(),c=new w({node:null}),d={Literal:"Literal",Variable:"Variable"},$=function(e){var o,a,n,t,l,r,i,s;if(e=V(e)?to(e):"",n={},""!==e)for(i=e.split("&"),l=0,r=i.length;r>l;l++)a=i[l],s=a.split("=",2),o=s[0],t=s[1],n[o]=t;return R(n)},j=function(){var e;return"#"+(null!=(e=window.location.href.split("#",2)[1])?e:"")},J=function(e){return V(e)||(e=""),e=to(e),"#"===e.slice(0,1)&&(e=e.slice(1)),window.location.hash=e},R=function(e){var o,a;if(B(e)||(e={}),u.CoerceParameterTypes)for(o in e)a=e[o],"true"===a?a=!0:"false"===a?a=!1:/^[0-9]+$/.test(a)?a=parseInt(a):/^[0-9]+\.[0-9]*$/.test(a)&&(a=parseFloat(a)),e[o]=a;return e},X=function(e){var o;return e=lo(e),o=""===e?[]:e.split("/"),o.unshift("/"),o},G=function(e){var o,a,n,t,l,r,i,s,d;for(l=C(e,"[")||C(e,"]"),l&&function(){var o,a;return a=N(e,"["),1!==a?(a>1&&z.warn('[FINCH] Parsing failed on "'+e+'": Extra ['),1>a&&z.warn('[FINCH] Parsing failed on "'+e+'": Missing ['),null):(o=N(e,"]"),1!==o?(o>1&&z.warn('[FINCH] Parsing failed on "'+e+'": Extra ]'),1>o&&z.warn('[FINCH] Parsing failed on "'+e+'": Missing ]'),null):Y(e,"[")?void 0:(z.warn('[FINCH] Parsing failed on "'+e+'": [ not at beginning'),null))}(),t=e.replace(/[\[\]]/g,""),n=""===t?[]:X(t),s=0,d=n.length;d>s;s++)if(a=n[s],""===a)return z.warn('[FINCH] Parsing failed on "'+e+'": Blank component'),null;if(o=0,l){if(i=e.split("]")[0],r=X(i.replace("[","")),r[r.length-1]!==n[r.length-1])return z.warn('[FINCH] Parsing failed on "'+e+'": ] in the middle of a component'),null;if(r.length===n.length)return z.warn('[FINCH] Parsing failed on "'+e+'": No child components'),null;o=r.length}return new h({components:n,childIndex:o})},E=function(e){return Y(e,":")?d.Variable:d.Literal},L=function(e){switch(E(e)){case d.Literal:return e;case d.Variable:return e.slice(1)}},g=function(e,o,a){var n,t,l,r,i;return l=o.components,t=o.childIndex,r=e,n=[],(i=function(s,c){var u,f,h,b,_,w,v;if(c===t&&(r=s),0>=o.components.length)return s.parent=r,s.bindings=n,s.routeSettings=new m(a);switch(u=l.shift(),h=E(u),f=L(u),h){case d.Literal:b=null!=(w=(_=s.childLiterals)[f])?w:_[f]=new p({name:""+s.name+u+"/",nodeType:h,parent:e});break;case d.Variable:b=null!=(v=s.childVariable)?v:s.childVariable=new p({name:""+s.name+u+"/",nodeType:h,parent:e}),n.push(f)}return i(b,c+1)})(e,0)},O=function(e,o){var a,n,t;return t=X(o),a=[],(n=function(e,o){var t,l;if(0>=o.length&&null!=e.routeSettings)return new w({node:e,boundValues:a});if(t=o[0],null!=e.childLiterals[t]&&(l=n(e.childLiterals[t],o.slice(1)),null!=l))return l;if(null!=e.childVariable){if(a.push(t),l=n(e.childVariable,o.slice(1)),null!=l)return l;a.pop()}return null})(e,t)},y=function(e,o){var a,n,t,l,r;for(n=[],t=o;null!=t;)n.push(t),t=t.getParent();for(t=e;null!=t;){for(l=0,r=n.length;r>l;l++)if(a=n[l],t.isEqual(a))return t;t=t.getParent()}return null},_=a=n=null,b=o=null,l=e=null,r=!1,i=v=!1,s=!1,u={CoerceParameterTypes:!1},(Q=function(){return _=new p({name:"*"}),a=c,b={},o={},n=null,l=null,e=null,r=!1,i=!1,v=!1,s=!1})(),Z=function(){var e;return null===n?M():s?no():n.isEqual(a)?eo():(e=y(a,n),a.isEqual(e)?oo():ao())},oo=function(){var e,o,t,l,r,i,s,d,c,u;return v=!0,l=(null!=(s=null!=(d=a.node)?d.routeSettings:void 0)?s:{context:null}).context,a=a.getChild(n),u=null!=(c=a.node.routeSettings)?c:{},o=u.context,i=u.setup,t=u.load,null==o&&(o={}),o.parent=l,null==i&&(i=function(){}),null==t&&(t=function(){}),e=a.getBindings(),r=function(){return Z()},2===i.length?i.call(o,e,r):(i.call(o,e),r())},eo=function(){var e,o,t,l,r,i,d;return l=function(){return s=!0,n=null,Z()},null==a.node?l():(d=null!=(i=a.node.routeSettings)?i:{},o=d.context,r=d.setup,t=d.load,null==o&&(o={}),null==r&&(r=function(){}),null==t&&(t=function(){}),e=a.getBindings(),2===t.length?t.call(o,e,l):(t.call(o,e),l()))},no=function(){var e,o,n,t,l,r;return s=!1,n=function(){return Z()},r=null!=(l=a.node.routeSettings)?l:{},o=r.context,t=r.unload,null==o&&(o={}),null==t&&(t=function(){}),e=a.getBindings(),2===t.length?t.call(o,e,n):(t.call(o,e),n())},ao=function(){var e,o,n,t,l,r;return v=!1,r=null!=(l=a.node.routeSettings)?l:{},o=r.context,t=r.teardown,null==o&&(o={}),null==t&&(t=function(){}),e=a.getBindings(),n=function(){return a=a.getParent(),Z()},2===t.length?t.call(o,e,n):(t.call(o,e),n())},M=function(){var e,n,t,l,r,i,s;for(e=D(x(b,o)),b=o,i=a.parameterObservables,s=[],l=0,r=i.length;r>l;l++)t=i[l],s.push(function(){var o,a,l;for(l=[],o=0,a=t.length;a>o;o++)n=t[o],l.push(n.notify(e));return l}());return s},S=function(){var o;return o=j(),Y(o,"#")&&(o=o.slice(1)),o=unescape(o),o!==e?t.call(o)?e=o:J(null!=e?e:""):void 0},t={route:function(e,o){var a,n;return P(o)&&(a=o,o={setup:a},o.load=2===a.length?function(e,o){return v?o():(i=!0,a(e,o))}:function(e){return v?void 0:(i=!0,a(e))}),B(o)||(o={}),V(e)||(e=""),e=to(e),e.length>0||(e="/"),n=G(e),null==n?!1:(g(_,n,o),!0)},call:function(e){var t,l,r,i,s,d;return V(e)||(e="/"),""===e&&(e="/"),d=e.split("?",2),e=d[0],s=d[1],l=O(_,e),null==l?(z.warn("[FINCH] Could not find route for: "+e),!1):(i=$(s),t=l.getBindings(),o=q(i,t),null===n&&a.isEqual(l)?Z():(r=n,n=l,null==r&&Z()),!0)},reload:function(){return s?null==a||null==a.node?this:(n=a,Z(),this):this},observe:function(){var e,o,n,l;return e=arguments.length>=1?co.call(arguments,0):[],i?i=!1:(o=e.pop(),P(o)||(o=function(){}),e.length>0?(n=1===e.length&&T(e[0])?e[0]:e,t.observe(function(e){var a,t;return t=function(){var o,t,l;for(l=[],o=0,t=n.length;t>o;o++)a=n[o],l.push(e(a));return l}(),o.apply(null,t)})):(l=new f(o),K(a.parameterObservables).push(l)))},abort:function(){return n=null},listen:function(){return r||("onhashchange"in window&&(P(window.addEventListener)?(window.addEventListener("hashchange",S,!0),r=!0):P(window.attachEvent)&&(window.attachEvent("hashchange",S),r=!0)),r||(l=setInterval(S,33),r=!0),S()),r},ignore:function(){return r&&(null!==l?(clearInterval(l),l=null,r=!1):"onhashchange"in window&&(P(window.removeEventListener)?(window.removeEventListener("hashchange",S,!0),r=!1):P(window.detachEvent)&&(window.detachEvent("hashchange",S),r=!1))),!r},navigate:function(e,o,a){var n,t,l,r,i,s,d,c,u,f,h,b,_;if(b=j().split("?",2),r=b[0],l=b[1],null==r&&(r=""),null==l&&(l=""),"#"===r.slice(0,1)&&(r=r.slice(1)),r=unescape(r),t=$(l),I(o)&&(a=o),B(e)&&(o=e),V(e)||(e=""),B(o)||(o={}),I(a)||(a=!1),e=to(e),0===e.length&&(e=null),a&&(function(){var e,o,a;o={};for(e in t)a=t[e],o[unescape(e)]=unescape(a);return t=o}(),o=q(t,o)),null===e&&(e=r),_=e.split("?",2),e=_[0],u=_[1],"#"===e.slice(0,1)&&(e=e.slice(1)),Y(e,"./")||Y(e,"../")){for(n=r;Y(e,"./")||Y(e,"../");)c=e.indexOf("/"),s=e.slice(0,c),e=e.slice(c+1),".."===s&&(n=n.slice(0,n.lastIndexOf("/")));e=e.length>0?""+n+"/"+e:n}return f=V(u)?$(u):{},o=q(f,o),o=k(o),e=escape(e),d=function(){var e;e=[];for(i in o)h=o[i],e.push(escape(i)+"="+escape(h));return e}().join("&"),d.length>0&&(e+="?"+d),J(e)},reset:function(){t.options({CoerceParameterTypes:!1}),n=c,Z(),t.ignore(),Q()},options:function(e){return q(u,e)}},this.Finch=t}).call(this);