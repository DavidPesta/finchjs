/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R=Array.prototype.slice;D=function(a){return typeof a==typeof {}},B=function(a){return Object.prototype.toString.call(a)==="[object Function]"},A=function(a){return Object.prototype.toString.call(a)==="[object Array]"},E=function(a){return Object.prototype.toString.call(a)==="[object String]"},C=function(a){return Object.prototype.toString.call(a)==="[object Number]"},P=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},Q=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},K=function(a,b){return a.indexOf(b)===0},r=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},q=function(a,b){return a.indexOf(b)!==-1},H=function(a){return a[a.length-1]},s=function(a,b){var c,d;D(a)||(a={}),D(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},F=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},p=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},O=function(a){var b,c,d,e;b=[],e=a!=null?a:{};for(c in e)d=e[c],b[b.length]=d;return b},l=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),n=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.setup,d=e.teardown,b=e.context,this.setup=B(c)?c:function(){},this.teardown=B(d)?d:function(){},this.context=D(b)?b:{}}return a}(),m=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.node,b=e.boundValues,d=e.parameterObservables,this.node=c!=null?c:null,this.boundValues=b!=null?b:[],this.parameterObservables=d!=null?d:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&p(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e,f;return this.node==null?null:(b=(e=(f=this.node.parent)!=null?f.bindings.length:void 0)!=null?e:0,c=this.boundValues.slice(0,b),d=this.parameterObservables.slice(0,-1),new a({node:this.node.parent,boundValues:c,parameterObservables:d}))},a.prototype.getChild=function(a){var b;while(a!=null&&!this.isEqual(b=a.getParent()))a=b;return a.parameterObservables=this.parameterObservables.slice(0),a.parameterObservables.push([]),a},a}(),j=function(){function a(a){var c=this;this.callback=a,B(this.callback)||(this.callback=function(){}),this.dependencies=[],this.parameterAccessor=function(a){return q(c.dependencies,a)||c.dependencies.push(a),b[a]}}return a.prototype.resetDependencies=function(){return this.dependencies=[]},a.prototype.trigger=function(){return this.resetDependencies(),this.callback(this.parameterAccessor)},a}(),i=new m({node:null}),h={Literal:"Literal",Variable:"Variable"},G=function(a){var b,c,d,e,f,g,h,i;a=E(a)?P(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},y=function(a){var b;return K(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},v=function(a){var b;return K(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},J=function(a){return a===""?[]:(a=Q(a),a.split("/"))},x=function(a){return K(a,":")?h.Variable:h.Literal},w=function(a){switch(x(a)){case h.Literal:return a;case h.Variable:return a.slice(1)}},o=function(a,b,c){var d,e,f,g,i;return g=J(y(b)),e=J(v(b)),f=a,d=[],(i=function(b,j){var k,m,o,p,q,r,s,t;k=null,q=!1,p=null;if(g.length<=0&&e.length<=0)return b.parent=f,b.bindings=d,b.routeSettings=new n(c);g.length>0?(k=g.shift(),g.length===0&&(q=!0)):k=e.shift(),o=x(k),m=w(k),j=""+j+"/"+k;switch(o){case h.Literal:p=(s=(r=b.childLiterals)[m])!=null?s:r[m]=new l({name:j,nodeType:o,parent:a});break;case h.Variable:p=(t=b.childVariable)!=null?t:b.childVariable=new l({name:j,nodeType:o}),d.push(m)}return q&&(f=p),i(p,j)})(a,"")},u=function(a,b){var c,d,e;return e=J(b),c=[],(d=function(a){var b,f;if(e.length<=0)return new m({node:a,boundValues:c});b=e.shift();if(a.childLiterals[b]!=null){f=d(a.childLiterals[b]);if(f!=null)return f}if(a.childVariable!=null){c.push(b),f=d(a.childVariable);if(f!=null)return f;c.pop()}return null})(a)},t=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},k=c=b=d=null,f=a=null,g=!1,(I=function(){return k=new l({name:"*"}),c=i,b={},d=null})(),L=function(){var a,b,e,f,g,h,i,j;if(d.isEqual(c)){j=c.parameterObservables;for(f=0,h=j.length;f<h;f++){e=j[f];for(g=0,i=e.length;g<i;g++)b=e[g],b.trigger()}return d=null}return a=t(c,d),c.isEqual(a)?M():N()},M=function(){var a,b,e,f,g,h;return c=c.getChild(d),h=(g=c.node.routeSettings)!=null?g:{},b=h.context,f=h.setup,b==null&&(b={}),f==null&&(f=function(){}),a=c.getBindings(),e=function(){return L()},f.length===2?f.call(b,a,e):(f.call(b,a),e())},N=function(){var a,b,d,e,f,g;return g=(f=c.node.routeSettings)!=null?f:{},b=g.context,e=g.teardown,b==null&&(b={}),e==null&&(e=function(){}),a=c.getBindings(),d=function(){return c=c.getParent(),L()},e.length===2?e.call(b,a,d):(e.call(b,a),d())},z=function(b){var c,d,f;c="","hash"in window.location?(c=window.location.hash,K(c,"#")&&(c=c.slice(1))):(d=window.location.href,f=d.split("#",2),c=f.length===2?f[1]:"");if(c!==a)return e.call(c),a=c},e={debug:!0,route:function(a,b){return B(b)&&(b={setup:b}),D(b)||(b={}),E(a)||(a=""),o(k,a,b)},call:function(a){var c,e,f,g,h,i;return E(a)||(a="/"),a===""&&(a="/"),i=a.split("?",2),a=i[0],h=i[1],e=u(k,a),e==null?!1:(g=G(h),c=e.getBindings(),b=s(g,c),f=d,d=e,f==null&&L(),!0)},observe:function(){var a,b,d,f;return a=1<=arguments.length?R.call(arguments,0):[],a.length>2?(b=a.pop(),e.observe(O(a),b)):a.length===2?(d=a[0],b=a[1],E(d)&&(d=[d]),A(d)||(d=[]),B(b)||(b=function(){}),e.observe(function(a){var c,e;return e=function(){var b,e,f;f=[];for(b=0,e=d.length;b<e;b++)c=d[b],f.push(a(c));return f}(),b.apply(null,e)})):(b=B(a[0])?a[0]:function(){},f=new j(b),H(c.parameterObservables).push(f))},listen:function(){return g||("onhashchange"in window&&(B(window.addEventListener)?(window.addEventListener("hashchange",z,!0),g=!0):B(window.attachEvent)&&(window.attachEvent("hashchange",z),g=!0)),g||(f=setInterval(z,33),g=!0),z()),g},ignore:function(){return g&&(f!==null?(clearInterval(f),f=null,g=!1):"onhashchange"in window&&(B(window.removeEventListener)?(window.removeEventListener("hashchange",z,!0),g=!1):B(window.detachEvent)&&(window.detachEvent("hashchange",z),g=!1))),!g},reset:function(){d=i,L(),I()}},this.Finch=e})).call(this)