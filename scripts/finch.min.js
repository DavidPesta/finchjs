/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;x=function(a){return typeof a==typeof {}},v=function(a){return Object.prototype.toString.call(a)==="[object Function]"},u=function(a){return Object.prototype.toString.call(a)==="[object Array]"},y=function(a){return Object.prototype.toString.call(a)==="[object String]"},w=function(a){return Object.prototype.toString.call(a)==="[object Number]"},G=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},H=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},E=function(a,b){return a.indexOf(b)===0},m=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},i=function(a,b){return a.indexOf(b)!==-1},n=function(a,b){var c,d;x(a)||(a={}),x(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},z=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},h=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},d=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),f=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.setup,d=e.teardown,b=e.context,this.setup=v(c)?c:function(){},this.teardown=v(d)?d:function(){},this.context=x(b)?b:{}}return a}(),e=function(){function a(a){var b,c,d;d=a!=null?a:{},c=d.node,b=d.boundValues,this.node=c!=null?c:null,this.boundValues=b!=null?b:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&h(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e;return this.node==null?null:(b=(d=(e=this.node.parent)!=null?e.bindings.length:void 0)!=null?d:0,c=this.boundValues.slice(0,b),new a({node:this.node.parent,boundValues:c}))},a.prototype.getChild=function(a){var b;while(a!=null&&!this.isEqual(b=a.getParent()))a=b;return a},a}(),c=new e({node:null}),b={Literal:"Literal",Variable:"Variable"},C=k=j=l=null,(B=function(){return C=new d({name:"*"}),k=c,j={},l=null})(),A=function(a){var b,c,d,e,f,g,h,i;a=y(a)?G(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},t=function(a){var b;return E(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},q=function(a){var b;return E(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},D=function(a){return a===""?[]:(a=H(a),a.split("/"))},s=function(a){return E(a,":")?b.Variable:b.Literal},r=function(a){switch(s(a)){case b.Literal:return a;case b.Variable:return a.slice(1)}},g=function(a,c,e){var g,h,i,j,k;return j=D(t(c)),h=D(q(c)),i=a,g=[],(k=function(c,l){var m,n,o,p,q,t,u,v;m=null,q=!1,p=null;if(j.length<=0&&h.length<=0)return c.parent=i,c.bindings=g,c.routeSettings=new f(e);j.length>0?(m=j.shift(),j.length===0&&(q=!0)):m=h.shift(),o=s(m),n=r(m),l=""+l+"/"+m;switch(o){case b.Literal:p=(u=(t=c.childLiterals)[n])!=null?u:t[n]=new d({name:l,nodeType:o,parent:a});break;case b.Variable:p=(v=c.childVariable)!=null?v:c.childVariable=new d({name:l,nodeType:o}),g.push(n)}return q&&(i=p),k(p,l)})(a,"")},p=function(a,b){var c,d,f;return f=D(b),c=[],(d=function(a){var b,g;if(f.length<=0)return new e({node:a,boundValues:c});b=f.shift();if(a.childLiterals[b]!=null){g=d(a.childLiterals[b]);if(g!=null)return g}if(a.childVariable!=null){c.push(b),g=d(a.childVariable);if(g!=null)return g;c.pop()}return null})(a)},o=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},F=function(){var a,b,c,d,e,f,g,h,i,j;return l.isEqual(k)?(console.log("RUN OBSERVABLES"),l=null):(a=o(k,l),d=c=f=b=null,k.isEqual(a)?(d=k.getChild(l),h=(g=d.node.routeSettings)!=null?g:{},c=h.context,f=h.setup,b=d.getBindings()):(d=k.getParent(),j=(i=k.node.routeSettings)!=null?i:{},c=j.context,f=j.teardown,b=k.getBindings()),c==null&&(c={}),f==null&&(f=function(){}),e=function(){return k=d,F()},f.length===2?f.call(c,b,e):(f.call(c,b),e()))},a={debug:!0,route:function(a,b){return v(b)&&(b={setup:b}),x(b)||(b={}),y(a)||(a=""),g(C,a,b)},call:function(a){var b,c,d,e,f,g;return y(a)||(a="/"),a===""&&(a="/"),g=a.split("?",2),a=g[0],f=g[1],c=p(C,a),c==null?!1:(e=A(f),b=c.getBindings(),j=n(e,b),d=l,l=c,d==null&&F(),!0)},reset:function(){l=c,F(),B()}},this.Finch=a})).call(this)