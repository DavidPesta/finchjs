/*
	Finch.js - Powerfully simple javascript routing
	by Rick Allen and Greg Smith

	Version 0.2.0
	Full source at https://github.com/stoodder/finchjs
	Copyright (c) 2011 RokkinCat, http://www.rokkincat.com

	MIT License, https://github.com/stoodder/finchjs/blob/master/LICENSE.md
	This file is generated by `cake build`, do not edit it by hand.
*/
((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;B=function(a){return typeof a==typeof {}},z=function(a){return Object.prototype.toString.call(a)==="[object Function]"},y=function(a){return Object.prototype.toString.call(a)==="[object Array]"},C=function(a){return Object.prototype.toString.call(a)==="[object String]"},A=function(a){return Object.prototype.toString.call(a)==="[object Number]"},K=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},L=function(a){return a.replace(/^\/+/,"").replace(/\/+$/,"")},I=function(a,b){return a.indexOf(b)===0},n=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},i=function(a,b){return a.indexOf(b)!==-1},o=function(a,b){var c,d;B(a)||(a={}),B(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},D=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},h=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},d=function(){function a(a){var b,c,d,e;e=a!=null?a:{},b=e.name,c=e.nodeType,d=e.parent,this.name=b!=null?b:"",this.nodeType=c!=null?c:null,this.parent=d!=null?d:null,this.routeSettings=null,this.childLiterals={},this.childVariable=null,this.bindings=[]}return a}(),f=function(){function a(a){var b,c,d,e;e=a!=null?a:{},c=e.setup,d=e.teardown,b=e.context,this.setup=z(c)?c:function(){},this.teardown=z(d)?d:function(){},this.context=B(b)?b:{}}return a}(),e=function(){function a(a){var b,c,d;d=a!=null?a:{},c=d.node,b=d.boundValues,this.node=c!=null?c:null,this.boundValues=b!=null?b:[]}return a.prototype.getBindings=function(){var a,b,c,d,e;b={},e=this.node.bindings;for(c=0,d=e.length;c<d;c++)a=e[c],b[a]=this.boundValues[c];return b},a.prototype.isEqual=function(a){return a!=null&&this.node===a.node&&h(this.boundValues,a.boundValues)},a.prototype.isRoot=function(){return this.node.parent==null},a.prototype.getParent=function(){var b,c,d,e;return this.node==null?null:(b=(d=(e=this.node.parent)!=null?e.bindings.length:void 0)!=null?d:0,c=this.boundValues.slice(0,b),new a({node:this.node.parent,boundValues:c}))},a.prototype.getChild=function(a){var b;while(a!=null&&!this.isEqual(b=a.getParent()))a=b;return a},a}(),c=new e({node:null}),b={Literal:"Literal",Variable:"Variable"},G=l=k=m=null,w=j=null,x=!1,(F=function(){return G=new d({name:"*"}),l=c,k={},m=null})(),E=function(a){var b,c,d,e,f,g,h,i;a=C(a)?K(a):"",d={};if(a!==""){h=a.split("&");for(f=0,g=h.length;f<g;f++)c=h[f],i=c.split("=",2),b=i[0],e=i[1],d[b]=e}return d},u=function(a){var b;return I(a,"[")?(b=a.indexOf("]"),a.slice(1,b-1+1||9e9)):""},r=function(a){var b;return I(a,"[")?(b=a.indexOf("]"),a.slice(b+1)):a},H=function(a){return a===""?[]:(a=L(a),a.split("/"))},t=function(a){return I(a,":")?b.Variable:b.Literal},s=function(a){switch(t(a)){case b.Literal:return a;case b.Variable:return a.slice(1)}},g=function(a,c,e){var g,h,i,j,k;return j=H(u(c)),h=H(r(c)),i=a,g=[],(k=function(c,l){var m,n,o,p,q,r,u,v;m=null,q=!1,p=null;if(j.length<=0&&h.length<=0)return c.parent=i,c.bindings=g,c.routeSettings=new f(e);j.length>0?(m=j.shift(),j.length===0&&(q=!0)):m=h.shift(),o=t(m),n=s(m),l=""+l+"/"+m;switch(o){case b.Literal:p=(u=(r=c.childLiterals)[n])!=null?u:r[n]=new d({name:l,nodeType:o,parent:a});break;case b.Variable:p=(v=c.childVariable)!=null?v:c.childVariable=new d({name:l,nodeType:o}),g.push(n)}return q&&(i=p),k(p,l)})(a,"")},q=function(a,b){var c,d,f;return f=H(b),c=[],(d=function(a){var b,g;if(f.length<=0)return new e({node:a,boundValues:c});b=f.shift();if(a.childLiterals[b]!=null){g=d(a.childLiterals[b]);if(g!=null)return g}if(a.childVariable!=null){c.push(b),g=d(a.childVariable);if(g!=null)return g;c.pop()}return null})(a)},p=function(a,b){var c,d,e,f,g;d=[],e=b;while(e!=null)d.push(e),e=e.getParent();e=a;while(e!=null){for(f=0,g=d.length;f<g;f++){c=d[f];if(e.isEqual(c))return e}e=e.getParent()}return null},J=function(){var a,b,c,d,e,f,g,h,i,j;return m.isEqual(l)?(console.log("RUN OBSERVABLES"),m=null):(a=p(l,m),d=c=f=b=null,l.isEqual(a)?(d=l.getChild(m),h=(g=d.node.routeSettings)!=null?g:{},c=h.context,f=h.setup,b=d.getBindings()):(d=l.getParent(),j=(i=l.node.routeSettings)!=null?i:{},c=j.context,f=j.teardown,b=l.getBindings()),c==null&&(c={}),f==null&&(f=function(){}),e=function(){return l=d,J()},f.length===2?f.call(c,b,e):(f.call(c,b),e()))},v=function(b){var c,d,e;c="","hash"in window.location?(c=window.location.hash,I(c,"#")&&(c=c.slice(1))):(d=window.location.href,e=d.split("#",2),c=e.length===2?e[1]:"");if(c!==j)return a.call(c),j=c},a={debug:!0,route:function(a,b){return z(b)&&(b={setup:b}),B(b)||(b={}),C(a)||(a=""),g(G,a,b)},call:function(a){var b,c,d,e,f,g;return C(a)||(a="/"),a===""&&(a="/"),g=a.split("?",2),a=g[0],f=g[1],c=q(G,a),c==null?!1:(e=E(f),b=c.getBindings(),k=o(e,b),d=m,m=c,d==null&&J(),!0)},listen:function(){return x||("onhashchange"in window?z(window.addEventListener)?(window.addEventListener("hashchange",v,!0),x=!0):z(window.attachEvent)&&(window.attachEvent("hashchange",v),x=!0):(w=setInterval(v,33),x=!0),v()),x},ignore:function(){return x&&(w!==null?(clearInterval(w),w=null,x=!1):"onhashchange"in window&&(z(window.removeEventListener)?(window.removeEventListener("hashchange",v,!0),x=!1):z(window.detachEvent)&&(window.detachEvent("hashchange",v),x=!1))),!x},reset:function(){m=c,J(),F()}},this.Finch=a})).call(this)